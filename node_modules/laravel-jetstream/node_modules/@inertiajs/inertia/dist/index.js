var e,t=(e=require("axios"))&&"object"==typeof e&&"default"in e?e.default:e;function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var n={modal:null,listener:null,show:function(e){var t=this;"object"==typeof e&&(e="All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>"+JSON.stringify(e));var i=document.createElement("html");i.innerHTML=e,i.querySelectorAll("a").forEach(function(e){return e.setAttribute("target","_top")}),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.boxSizing="border-box",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",function(){return t.hide()});var n=document.createElement("iframe");n.style.backgroundColor="white",n.style.borderRadius="5px",n.style.width="100%",n.style.height="100%",this.modal.appendChild(n),document.body.prepend(this.modal),document.body.style.overflow="hidden",n.contentWindow.document.open(),n.contentWindow.document.write(i.outerHTML),n.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide:function(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape:function(e){27===e.keyCode&&this.hide()}};exports.Inertia={resolveComponent:null,swapComponent:null,transformProps:null,cancelToken:null,visitId:null,page:null,init:function(e){var t=e.initialPage,i=e.swapComponent,n=e.transformProps;this.resolveComponent=e.resolveComponent,this.swapComponent=i,this.transformProps=n,this.handleInitialPageVisit(t),this.setupEventListeners()},handleInitialPageVisit:function(e){this.isBackForwardVisit()?this.handleBackForwardVisit(e):this.isLocationVisit()?this.handleLocationVisit(e):(e.url+=window.location.hash,this.setPage(e)),this.fireEvent("navigate",{detail:{page:e}})},setupEventListeners:function(){var e,t;window.addEventListener("popstate",this.handlePopstateEvent.bind(this)),document.addEventListener("scroll",(e=this.handleScrollEvent.bind(this),t=null,function(){var i=arguments,n=this;clearTimeout(t),t=setTimeout(function(){return e.apply(n,i)},100)}),!0)},scrollRegions:function(){return document.querySelectorAll("[scroll-region]")},handleScrollEvent:function(e){"function"==typeof e.target.hasAttribute&&e.target.hasAttribute("scroll-region")&&this.saveScrollPositions()},saveScrollPositions:function(){this.replaceState(i({},this.page,{scrollRegions:Array.prototype.slice.call(this.scrollRegions()).map(function(e){return{top:e.scrollTop,left:e.scrollLeft}})}))},resetScrollPositions:function(){var e;document.documentElement.scrollTop=0,document.documentElement.scrollLeft=0,this.scrollRegions().forEach(function(e){e.scrollTop=0,e.scrollLeft=0}),this.saveScrollPositions(),window.location.hash&&(null==(e=document.getElementById(window.location.hash.slice(1)))||e.scrollIntoView())},restoreScrollPositions:function(){var e=this;this.page.scrollRegions&&this.scrollRegions().forEach(function(t,i){t.scrollTop=e.page.scrollRegions[i].top,t.scrollLeft=e.page.scrollRegions[i].left})},isBackForwardVisit:function(){return window.history.state&&window.performance&&window.performance.getEntriesByType("navigation").length&&"back_forward"===window.performance.getEntriesByType("navigation")[0].type},handleBackForwardVisit:function(e){var t=this;window.history.state.version=e.version,this.setPage(window.history.state,{preserveScroll:!0}).then(function(){t.restoreScrollPositions()})},locationVisit:function(e,t){try{window.sessionStorage.setItem("inertiaLocationVisit",JSON.stringify({preserveScroll:t})),window.location.href=e.href,this.urlWithoutHash(window.location).href===this.urlWithoutHash(e).href&&window.location.reload()}catch(e){return!1}},isLocationVisit:function(){try{return null!==window.sessionStorage.getItem("inertiaLocationVisit")}catch(e){return!1}},handleLocationVisit:function(e){var t,i,n,o,r=this,s=JSON.parse(window.sessionStorage.getItem("inertiaLocationVisit"));window.sessionStorage.removeItem("inertiaLocationVisit"),e.url+=window.location.hash,e.rememberedState=null!=(t=null==(i=window.history.state)?void 0:i.rememberedState)?t:{},e.scrollRegions=null!=(n=null==(o=window.history.state)?void 0:o.scrollRegions)?n:[],this.setPage(e,{preserveScroll:s.preserveScroll}).then(function(){s.preserveScroll&&r.restoreScrollPositions()})},isLocationVisitResponse:function(e){return e&&409===e.status&&e.headers["x-inertia-location"]},isInertiaResponse:function(e){return null==e?void 0:e.headers["x-inertia"]},cancelActiveVisits:function(){this.cancelToken&&this.cancelToken.cancel(),this.cancelToken=t.CancelToken.source()},createVisitId:function(){return this.visitId={},this.visitId},normalizeUrl:function(e){try{return e.startsWith("#")?new URL(""+this.urlWithoutHash(window.location)+e):new URL(e)}catch(t){return new URL(""+window.location.origin+e)}},urlWithoutHash:function(e){return(e=new URL(e.href)).hash="",e},visit:function(e,o){var r=this,s=void 0===o?{}:o,a=s.method,l=void 0===a?"get":a,c=s.data,h=void 0===c?{}:c,d=s.replace,u=void 0!==d&&d,p=s.preserveScroll,v=void 0!==p&&p,f=s.preserveState,m=void 0!==f&&f,w=s.only,g=void 0===w?[]:w,y=s.headers,S=void 0===y?{}:y,P=s.onCancelToken,b=void 0===P?function(){return{}}:P,E=s.onStart,L=void 0===E?function(){return{}}:E,I=s.onProgress,V=void 0===I?function(){return{}}:I,R=s.onFinish,C=void 0===R?function(){return{}}:R,k=s.onCancel,T=void 0===k?function(){return{}}:k,x=s.onSuccess,W=void 0===x?function(){return{}}:x,H=i({url:e=this.normalizeUrl(e)},arguments[1]);if(!1!==L(H)&&this.fireEvent("start",{cancelable:!0,detail:{visit:H}})){this.cancelActiveVisits(),this.saveScrollPositions();var U=this.createVisitId();return b(this.cancelToken),new Proxy(t({method:l,url:this.urlWithoutHash(e).href,data:"get"===l.toLowerCase()?{}:h,params:"get"===l.toLowerCase()?h:{},cancelToken:this.cancelToken.token,headers:i({},S,{Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Inertia":!0},g.length?{"X-Inertia-Partial-Component":this.page.component,"X-Inertia-Partial-Data":g.join(",")}:{},this.page.version?{"X-Inertia-Version":this.page.version}:{}),onUploadProgress:function(e){e.percentage=Math.round(e.loaded/e.total*100),r.fireEvent("progress",{detail:{progress:e}}),V(e)}}).then(function(t){if(!r.isInertiaResponse(t))return Promise.reject({response:t});g.length&&t.data.component===r.page.component&&(t.data.props=i({},r.page.props,t.data.props));var n=r.normalizeUrl(t.data.url);return e.hash&&!n.hash&&r.urlWithoutHash(e).href===n.href&&(n.hash=e.hash,t.data.url=n.href),r.setPage(t.data,{visitId:U,replace:u,preserveScroll:v,preserveState:m})}).then(function(){return r.fireEvent("success",{detail:{page:r.page}}),W(r.page)}).catch(function(i){if(r.isInertiaResponse(i.response))return r.setPage(i.response.data,{visitId:U});if(t.isCancel(i))T();else if(r.isLocationVisitResponse(i.response)){var o=r.normalizeUrl(i.response.headers["x-inertia-location"]);e.hash&&!o.hash&&r.urlWithoutHash(e).href===o.href&&(o.hash=e.hash),r.locationVisit(o,v)}else{if(!i.response)return Promise.reject(i);r.fireEvent("invalid",{cancelable:!0,detail:{response:i.response}})&&n.show(i.response.data)}}).catch(function(e){if(r.fireEvent("error",{cancelable:!0,detail:{error:e}}))return Promise.reject(e)}).finally(function(){r.fireEvent("finish"),C()}),{get:function(e,t){return["then","catch","finally"].includes(t)&&console.warn("Inertia.js visit promises have been deprecated and will be removed in a future release. Please use the new visit event callbacks instead.\n\nLearn more at https://inertiajs.com/manual-visits#promise-deprecation"),"function"==typeof e[t]?e[t].bind(e):e[t]}})}},setPage:function(e,t){var i=this,n=void 0===t?{}:t,o=n.visitId,r=void 0===o?this.createVisitId():o,s=n.replace,a=void 0!==s&&s,l=n.preserveScroll,c=void 0!==l&&l,h=n.preserveState,d=void 0!==h&&h;return Promise.resolve(this.resolveComponent(e.component)).then(function(t){r===i.visitId&&(e.props=i.transformProps(e.props),e.scrollRegions=e.scrollRegions||[],e.rememberedState=e.rememberedState||{},d="function"==typeof d?d(e):d,c="function"==typeof c?c(e):c,(a=a||i.normalizeUrl(e.url).href===window.location.href)?i.replaceState(e):i.pushState(e),i.swapComponent({component:t,page:e,preserveState:d}).then(function(){c||i.resetScrollPositions(),a||i.fireEvent("navigate",{detail:{page:e}})}))})},pushState:function(e){this.page=e,window.history.pushState(e,"",e.url)},replaceState:function(e){this.page=e,window.history.replaceState(e,"",e.url)},handlePopstateEvent:function(e){var t=this;if(null!==e.state){var n=e.state,o=this.createVisitId();return Promise.resolve(this.resolveComponent(n.component)).then(function(e){o===t.visitId&&(t.page=n,t.swapComponent({component:e,page:n,preserveState:!1}).then(function(){t.restoreScrollPositions(),t.fireEvent("navigate",{detail:{page:n}})}))})}var r=this.normalizeUrl(this.page.url);r.hash=window.location.hash,this.replaceState(i({},this.page,{url:r.href})),this.resetScrollPositions()},get:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.visit(e,i({},n,{method:"get",data:t}))},reload:function(e){return void 0===e&&(e={}),this.replace(window.location.href,e)},replace:function(e,t){return void 0===t&&(t={}),this.visit(e,i({preserveState:!0},t,{replace:!0}))},post:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.visit(e,i({preserveState:!0},n,{method:"post",data:t}))},put:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.visit(e,i({preserveState:!0},n,{method:"put",data:t}))},patch:function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.visit(e,i({preserveState:!0},n,{method:"patch",data:t}))},delete:function(e,t){return void 0===t&&(t={}),this.visit(e,i({preserveState:!0},t,{method:"delete"}))},remember:function(e,t){var n;void 0===t&&(t="default"),this.replaceState(i({},this.page,{rememberedState:i({},this.page.rememberedState,(n={},n[t]=e,n))}))},restore:function(e){var t,i;return void 0===e&&(e="default"),null==(t=window.history.state)||null==(i=t.rememberedState)?void 0:i[e]},fireEvent:function(e,t){return document.dispatchEvent(new CustomEvent("inertia:"+e,t))},on:function(e,t){var i=function(e){var i=t(e);e.cancelable&&!e.defaultPrevented&&!1===i&&e.preventDefault()};return document.addEventListener("inertia:"+e,i),function(){return document.removeEventListener("inertia:"+e,i)}}},exports.shouldIntercept=function(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)};
//# sourceMappingURL=index.js.map
